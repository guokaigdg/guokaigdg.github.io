---
layout: post
title: 'ä½¿ç”¨nwbå‘å¸ƒä½ çš„ç¬¬ä¸€ä¸ªnpmç»„ä»¶'
date: 2019-12-02 20:00:21 +0800
author: ma_meng
color: rgb(255,210,32)
cover: 'https://img-blog.csdnimg.cn/20191203230246711.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2d1b2thaWdkZw==,size_16,color_FFFFFF,t_70'
subtitle: ''
tags: npmåŒ…
---

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20191203230246711.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2d1b2thaWdkZw==,size_16,color_FFFFFF,t_70)


### nwb æ˜¯ä»€ä¹ˆ?
> ä¸€ä¸ªç”¨äºnpmæ¨¡å—çš„å·¥å…·åŒ…, æ”¯æŒ
- `React`ã€`Preact`ã€`Inferno` & `vanilla JS`åº”ç”¨ç¨‹åºã€`Reactåº“`å’Œå…¶ä»–`web`

### 1. nwbå®‰è£…:
- å…¨å±€å®‰è£…nwb, ä½¿ç”¨npmæˆ–è€…cnpm
```
npm install -g nwb  //å…¨å±€å®‰è£…nwb
```

```
cnpm install -g nwb  //å…¨å±€å®‰è£…nwb
```

### 2.åˆ›å»ºç»„ä»¶ nwb

```
nwb new react-component yunshang
cd yunshang/
```

- nwb é¡¹ç›®é‡Œæœ‰ä¸€ä¸ª./demo/src/index.jsæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å¯ä»¥ç†è§£ä¸ºæµ‹è¯•ä½ å¼€å‘ç»„ä»¶çš„æ–‡ä»¶

```js
import React, {Component} from 'react'
import {render} from 'react-dom'
import Button from '../../src/index';

class Demo extends Component {
  handleClick =  ()=> {
    console.log("å·²ç‚¹å‡»");
  }
  render() {
    return (
      <div>
        <Button 
          onClick = {()=>{this.handleClick()}} 
          disabled = {false}
        >
          ç™»é™†
        </Button>
        <Button disabled = {true} >ç¦ç”¨</Button>
        <Button />
      </div>
    )
  }
}
render(<Demo/>, document.querySelector('#demo'))
```

- è¿˜æœ‰ä¸€ä¸ª./src/index.jsæ–‡ä»¶ï¼Œè¿™ä¸ªæ˜¯è‡ªå·±å¼€å‘ç»„ä»¶çš„æ–‡ä»¶

```js
import React, {Component} from 'react';
import PropTypes from 'prop-types';
import CX from 'classnames';
import './index.css';

class Button extends Component {
  state = {
    active: false,
  }
  render() {
    const { children, onClick, disabled} = this.props;
    console.log(disabled);
    return (
      <span
        className = {CX({
          btn:true,
          "btn-disabled": disabled === true ,
        })}
        onClick = {onClick}
      >
        <span className = 'btn-content'>
          {children}
        </span>
      </span>
    )
  }
}

Button.propTypes = {
  children: PropTypes.string,
  onClick: PropTypes.func,
  disabled: PropTypes.bool,
}
Button.defaultProps = {
  children:"Button",
  onClick: () => {return null},
  disabled : false,
}
export default Button
```

### 3. ğŸ”¨æ„å»ºå‡ºå¯ä»¥å‘å¸ƒçš„å†…å®¹ npm run build 
- å‘å¸ƒä¹‹å‰ç¡®è®¤è·Ÿä¸Šæ¬¡ç‰ˆæœ¬å·ä¸ä¸€æ ·ï¼Œä¸ç„¶ä¼šç‰ˆæœ¬å·é‡å¤æŠ¥é”™
```
npm run build
```
- buildæ¨¡å—-- --copy-files å¯å°†cssæ‰“åŒ…è¿›npmåŒ…( é»˜è®¤æ˜¯ä¸æ‰“åŒ…cssæ–‡ä»¶çš„ )ä¿®æ”¹package.jsonä¸­çš„build

```js
    "scripts": {
        "build": "nwb build-react-component --copy-files",
    },
```

### 4.å‘å¸ƒnpmåŒ…  npm publish
```
npm publish
```

-  https://www.npmjs.com æŸ¥çœ‹æœ‰æ²¡æœ‰å‘å¸ƒæˆåŠŸ

### 5.åˆ é™¤npmåŒ…

```
npm unpublish yunshang --force
```

### 6.è°ƒç”¨npmåŒ…
- åœ¨reacté¡¹ç›®ä¸­å®‰è£…
```
npm i noo-ui   // æˆ–è€…cnpm inoo-ui
```
- App.js
```js
import React from 'react';
import './App.css';
import Button from 'noo-ui';  //å¼•å…¥åˆšæ‰ä¸Šä¼ çš„npmåŒ…
function App() {
  return (
    <div >
         <Button 
          onClick = {()=>{this.handleClick()}} 
          disabled = {false}
        >
          ç™»é™†
        </Button>
        <Button disabled = {true} >ç¦ç”¨</Button>
        <Button />
    </div>
  );
}
export default App;
```


![](https://user-gold-cdn.xitu.io/2019/12/5/16ed206b8609db2c?w=690&h=352&f=gif&s=2354559)

